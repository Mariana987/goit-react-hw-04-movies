(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[0],{13:function(e,t,c){e.exports={movieList:"MoviesPage_movieList__3v3Ew",movieItem:"MoviesPage_movieItem__3q0gP",search:"MoviesPage_search__2p_IX",searchButton:"MoviesPage_searchButton__2EJ_M"}},14:function(e,t,c){e.exports={navigation:"Navigation_navigation__ciY4g",navItem:"Navigation_navItem__1F03V"}},18:function(e,t,c){e.exports={movieList:"HomePage_movieList__1c4w9",movieItem:"HomePage_movieItem__XggNA"}},29:function(e,t,c){},30:function(e,t,c){},38:function(e,t){},39:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),i=c(21),s=c.n(i),o=(c(29),c(3)),r=c(11),j=(c(30),c(2)),l=c(9),u=c(17),h=c.n(u),b=c(22),d="82247949d6984757ff30e3696af16cf8",m="https://api.themoviedb.org/3";function v(){return O.apply(this,arguments)}function O(){return O=Object(b.a)(h.a.mark((function e(){var t,c,n,a=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:"",c=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,fetch(t,c);case 4:if(!(n=e.sent).ok){e.next=11;break}return e.next=8,n.json();case 8:e.t0=e.sent,e.next=12;break;case 11:e.t0=Promise.reject(new Error("Not found"));case 12:return e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}function f(e){return v("".concat(m,"/search/movie?query=").concat(e,"&api_key=").concat(d))}var x=c(18),p=c.n(x),_=c(0);function g(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),c=t[0],a=t[1];return Object(n.useEffect)((function(){fetch("".concat(m,"/trending/movie/week?api_key=").concat(d)).then((function(e){return e.json()})).then((function(e){a(e.results)}))}),[]),Object(_.jsxs)("div",{children:[Object(_.jsx)("h1",{children:"Popular Today"}),Object(_.jsxs)("ul",{children:[c&&c.map((function(e){return Object(_.jsx)("li",{className:p.a.movieList,children:Object(_.jsx)(o.b,{to:"/".concat(e.id),className:p.a.movieItem,children:e.title})},e.id)})),Object(_.jsx)(o.c,{to:"/details",children:" "})]})]})}var N=c(13),w=c.n(N);function I(){var e=Object(j.f)(),t=Object(j.g)(),c=Object(n.useState)(null),a=Object(l.a)(c,2),i=a[0],s=a[1],u=new URLSearchParams(t.search).get("query");Object(n.useEffect)((function(){u?f(u).then((function(e){s(e.results)})):s(null)}),[u]);return Object(_.jsxs)("div",{children:[Object(_.jsxs)("form",{onSubmit:function(c){c.preventDefault(),e.push(Object(r.a)(Object(r.a)({},t.pathname),{},{search:"query=".concat(c.target[0].value)})),f(c.target[0].value).then((function(e){var t=e.results;s(t)})).finally(c.target[0].value="")},children:[Object(_.jsx)("label",{children:Object(_.jsx)("input",{className:w.a.search,type:"text"})}),Object(_.jsx)("button",{className:w.a.searchButton,type:"submit",children:"Search"})]}),i&&Object(_.jsx)("ol",{children:i.map((function(e){return console.log(e.id),Object(_.jsx)("li",{className:w.a.movieList,children:Object(_.jsx)(o.b,{to:{pathname:"/movies/".concat(e.id),state:{from:t}},className:w.a.movieItem,children:e.title})},e.id)}))})]})}function P(){var e=Object(j.h)().url,t=Object(n.useState)(null),c=Object(l.a)(t,2),a=c[0],i=c[1],s=Object(j.h)().movieId;return console.log(e),Object(n.useEffect)((function(){var e;return(e=s,v("".concat(m,"/movie/").concat(e,"/credits?api_key=").concat(d))).then((function(e){i(e.cast),console.log(e.cast.map((function(e){return e.id})))})),function(){}}),[s]),a&&Object(_.jsx)("ul",{children:a.map((function(e){return Object(_.jsxs)("li",{children:[e.profile_path?Object(_.jsx)("img",{src:"".concat("https://image.tmdb.org/t/p/w200").concat(e.profile_path),alt:e.name}):Object(_.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/2748/2748558.png",alt:"Not found",width:200}),Object(_.jsx)("p",{children:e.name}),Object(_.jsx)("p",{children:e.character})]},e.id)}))})}function k(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),c=t[0],a=t[1],i=Object(j.h)().movieId;return Object(n.useEffect)((function(){var e;(e=i,v("".concat(m,"/movie/").concat(e,"/reviews?api_key=").concat(d))).then((function(e){a(e.results)}))}),[i]),c?Object(_.jsx)("ul",{children:c.map((function(e){return Object(_.jsxs)("li",{children:[Object(_.jsxs)("h2",{children:["Author: ",e.author_details.username]}),Object(_.jsx)("p",{children:e.content})]},e.id)}))}):Object(_.jsx)("p",{children:"We don't have any reviews for this movie."})}var y=c(8),M=c.n(y);function L(e){var t=e.match,c=e.history,a=e.location,i=Object(j.h)().movieId,s=Object(j.i)().url,r=Object(n.useState)(null),u=Object(l.a)(r,2),h=u[0],b=u[1];Object(n.useEffect)((function(){var e;(e=i,v("".concat(m,"/movie/").concat(e,"?api_key=").concat(d))).then((function(e){b(e)}))}),[i]);return h&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("button",{type:"button",onClick:function(){var e,t;c.push(null!==(e=null===a||void 0===a||null===(t=a.state)||void 0===t?void 0:t.from)&&void 0!==e?e:"/")},className:M.a.button,children:"Go back"}),Object(_.jsxs)("div",{className:M.a.info,children:[Object(_.jsx)("img",{className:M.a.image,src:"".concat("https://image.tmdb.org/t/p/w200").concat(h.poster_path),alt:h.title}),Object(_.jsxs)("div",{className:M.a.data,children:["   ",Object(_.jsx)("h1",{className:M.a.title,children:h.title}),Object(_.jsxs)("p",{children:["User score: ",h.vote_average]}),Object(_.jsx)("p",{className:M.a.overview,children:h.overview}),Object(_.jsx)("h2",{children:"Genres"}),h.genres.map((function(e){return Object(_.jsx)("li",{children:e.name},h.genres.id)}))]})]}),Object(_.jsx)("hr",{className:M.a.shadow}),Object(_.jsx)("h4",{children:"Additionnal Information"}),Object(_.jsxs)("div",{className:M.a.addInfo,children:[Object(_.jsx)(o.c,{className:M.a.infoLink,to:"".concat(s,"/cast"),children:"Cast "}),Object(_.jsx)(o.c,{className:M.a.infoLink,to:"".concat(s,"/reviews"),children:"Review "})]}),Object(_.jsx)(n.Suspense,{fallback:Object(_.jsx)("h1",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u0444\u0438\u043b\u044c\u043c\u0435..."}),children:Object(_.jsxs)(j.c,{children:[Object(_.jsx)(j.a,{path:"".concat(t.path,"/cast"),children:Object(_.jsx)(P,{})}),Object(_.jsx)(j.a,{path:"/movies/:movieId/reviews",component:k})]})})]})}c(38);function S(){return Object(_.jsx)("h1",{children:"404 NOT FOUND"})}var D=c(14),E=c.n(D),F=function(){return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("nav",{className:E.a.navigation,children:[Object(_.jsx)(o.c,{exact:!0,to:"/",className:E.a.navItem,children:" Home Page"}),Object(_.jsx)(o.c,{to:"/movies",className:E.a.navItem,children:"Movie Page "})]}),Object(_.jsx)("hr",{})]})};var q=function(){return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(F,{}),Object(_.jsxs)(j.c,{children:[Object(_.jsx)(j.a,{path:"/",exact:!0,children:Object(_.jsx)(g,{})}),Object(_.jsx)(j.a,{path:"/movies",exact:!0,children:Object(_.jsx)(I,{})}),Object(_.jsx)(j.a,{path:"/:movieId",exact:!0,render:function(e){return Object(_.jsx)(L,Object(r.a)({},e))}}),Object(_.jsx)(j.a,{path:"/movies/:movieId",exact:!0,render:function(e){return Object(_.jsx)(L,Object(r.a)({},e))}}),Object(_.jsx)(j.a,{children:Object(_.jsx)(S,{})})]})]})};s.a.render(Object(_.jsx)(a.a.StrictMode,{children:Object(_.jsx)(o.a,{children:Object(_.jsx)(q,{})})}),document.getElementById("root"))},8:function(e,t,c){e.exports={button:"MovieDetailsPage_button__2sxnE",image:"MovieDetailsPage_image__2e054",title:"MovieDetailsPage_title__L-fr9",info:"MovieDetailsPage_info__3LXpP",data:"MovieDetailsPage_data__2VxOK",overview:"MovieDetailsPage_overview__2UGm4",addInfo:"MovieDetailsPage_addInfo__SmskV",infoLink:"MovieDetailsPage_infoLink__1tbZ6"}}},[[39,1,2]]]);
//# sourceMappingURL=main.1587b7b8.chunk.js.map